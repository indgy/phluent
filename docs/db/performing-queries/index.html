<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Performing Queries - Phluent Docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../style.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Performing Queries";
    var mkdocs_page_input_path = "db/performing-queries.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/php.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Phluent Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../getting-started/">Getting Started</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Query</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../query/">Using Query</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../query/examples/">Examples</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../query/selecting/">Selecting rows</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../query/inserting/">Inserting rows</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../query/updating/">Updating rows</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../query/deleting/">Deleting rows</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../query/debugging/">Debugging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Clauses</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../query/clauses/distinct/">Distinct</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../query/clauses/join/">Join</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../query/clauses/where/">Where</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../query/clauses/group-by/">Group By</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../query/clauses/order-by/">Order By</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../query/clauses/limit/">Limit</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../query/clauses/offset/">Offset</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../query/clauses/unions/">Unions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../query/clauses/aggregates/">Aggregates</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../query/clauses/pagination/">Pagination</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">DB</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../">Using DB</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Performing Queries</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#using-query">Using query()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#using-raw">Using raw()</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../changed-query-methods/">Changed Query methods</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../transactions/">Transactions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../logging/">Logging</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Phluent Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>DB &raquo;</li>
        
      
    
    <li>Performing Queries</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="performing-queries">Performing queries</h1>
<p>There are two methods that allow the passing of raw SQL statements and parameters, <code>query()</code> and <code>raw()</code>. Both expect the SQL statement as the first parameter and an array of values as the second.</p>
<h3 id="using-query">Using query()</h3>
<p>The <code>query()</code> method tracks the PDOStatment internally allowing you to continue using the DB methods.</p>
<pre><code class="language-php">// query(String $sql, Array $params) : DB

$db-&gt;query('SELECT * FROM `movies` WHERE `year`=? AND `rating`&gt;?', [2020, 8]);
echo $db-&gt;getRowCount();
</code></pre>
<h3 id="using-raw">Using raw()</h3>
<p>The <code>raw()</code> method returns the PDOStatement for you to manage.</p>
<pre><code class="language-php">// raw(String $sql, Array $params) : PDOStatement

$stmt = $db-&gt;raw('SELECT * FROM `movies` WHERE `year`=? AND `rating`&gt;?', [2020, 8]);
foreach ($stmt-&gt;fetchAll() as $row) {
    echo $row-&gt;title;
}
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using <code>query()</code> or <code>raw()</code> directly any passed parameters will be escaped by PDO as expected but it is up to you to ensure that your SQL is safe to execute.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All your parameter data is passed to PDO to be escaped as expected, however all references to tables or columns are also sanitised and only specific characters are allowed, these are a-z, 0-9 and the underscore. If you require other characters you may use the <code>addReferenceChars()</code> method to add more.</p>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../changed-query-methods/" class="btn btn-neutral float-right" title="Changed Query methods">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../" class="btn btn-neutral" title="Using DB"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Â©2021 <a href="https://indgy.uk">Indgy</a></p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../changed-query-methods/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
